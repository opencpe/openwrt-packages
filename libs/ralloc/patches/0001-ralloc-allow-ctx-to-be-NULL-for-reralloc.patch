From f6e0deb59a625e8e4ad0cd2c81fa8913fe15e588 Mon Sep 17 00:00:00 2001
From: Jonas Gorski <jogo@openwrt.org>
Date: Wed, 24 Sep 2014 16:11:12 +0200
Subject: [PATCH 1/3] ralloc: allow ctx to be NULL for reralloc

---
 src/util/ralloc.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/src/util/ralloc.c b/src/util/ralloc.c
index 36bc61f..aabe312 100644
--- a/src/util/ralloc.c
+++ b/src/util/ralloc.c
@@ -174,7 +174,9 @@ reralloc_size(const void *ctx, void *ptr, size_t size)
    if (unlikely(ptr == NULL))
       return ralloc_size(ctx, size);
 
-   assert(ralloc_parent(ptr) == ctx);
+   if (ctx != NULL)
+      assert(ralloc_parent(ptr) == ctx);
+
    return resize(ptr, size);
 }
 
-- 
2.0.1

